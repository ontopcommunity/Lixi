<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√≤ng Quay L√¨ X√¨ May M·∫Øn</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        :root {
            --primary-color: #d32f2f;
            --secondary-color: #ffeb3b;
            --text-color: #333;
            --bg-color: #fce4ec;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--primary-color);
            background-image: radial-gradient(circle, #e53935 10%, transparent 10%), radial-gradient(circle, #e53935 10%, transparent 10%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        .container {
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
            border: 5px solid var(--secondary-color);
            position: relative;
            overflow: hidden;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 24px;
            text-transform: uppercase;
            border-bottom: 2px dashed var(--primary-color);
            padding-bottom: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        input[type="text"] {
            width: 80%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border 0.3s;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
        }

        .btn {
            background: var(--primary-color);
            color: var(--secondary-color);
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            background: #999;
            cursor: not-allowed;
            transform: none;
        }

        #result-area {
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.5s;
        }

        .money-display {
            font-size: 40px;
            color: #d32f2f;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .qr-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            display: none; /* Hidden initially */
        }

        .file-upload {
            margin-bottom: 15px;
        }
        
        input[type="file"] {
            display: none;
        }

        .custom-file-upload {
            border: 2px dashed #ccc;
            display: inline-block;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 8px;
            width: 80%;
            color: #666;
        }

        .custom-file-upload:hover {
            background: #f9f9f9;
            border-color: var(--primary-color);
        }

        #loading {
            display: none;
            color: var(--primary-color);
            font-weight: bold;
            margin: 15px 0;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Decoration */
        .deco {
            position: absolute;
            font-size: 30px;
            opacity: 0.2;
            pointer-events: none;
        }
        .d1 { top: 10px; left: 10px; transform: rotate(-20deg); }
        .d2 { top: 10px; right: 10px; transform: rotate(20deg); }
        .d3 { bottom: 10px; left: 10px; transform: rotate(20deg); }
        .d4 { bottom: 10px; right: 10px; transform: rotate(-20deg); }

    </style>
</head>
<body>

    <div class="container">
        <div class="deco d1">üå∏</div>
        <div class="deco d2">üßß</div>
        <div class="deco d3">üí∞</div>
        <div class="deco d4">üå∏</div>

        <h1>L√¨ X√¨ May M·∫Øn</h1>

        <div id="step-1">
            <p>Nh·∫≠p t√™n c·ªßa b·∫°n ƒë·ªÉ th·ª≠ v·∫≠n may:</p>
            <div class="input-group">
                <input type="text" id="user-name" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A">
            </div>
            <button class="btn" onclick="startRandom()">B·ªëc L√¨ X√¨ Ngay</button>
        </div>

        <div id="loading">ƒêang l·∫Øc ·ªëng xƒÉm... üé≤</div>

        <div id="result-area">
            <p>Ch√∫c m·ª´ng <strong id="display-name"></strong>!</p>
            <p>B·∫°n ƒë√£ nh·∫≠n ƒë∆∞·ª£c:</p>
            <div class="money-display" id="lucky-money">0 VNƒê</div>
            
            <div class="qr-section" id="qr-section">
                <p style="font-size: 14px; color: #555;">T·∫£i ·∫£nh m√£ QR ng√¢n h√†ng c·ªßa b·∫°n l√™n ƒë·ªÉ nh·∫≠n ti·ªÅn nh√©!</p>
                <label for="qr-file" class="custom-file-upload">
                    üìÇ Ch·ªçn ·∫£nh QR
                </label>
                <input type="file" id="qr-file" accept="image/*" onchange="previewFile()">
                <div id="file-name" style="margin-top: 5px; font-size: 12px; color: #d32f2f;"></div>
                
                <br><br>
                <button class="btn" id="btn-send" onclick="sendToTelegram()">G·ª≠i x√°c nh·∫≠n</button>
            </div>
        </div>
    </div>

    <script>
        // ================= C·∫§U H√åNH TELEGRAM =================
        // B·∫†N H√ÉY THAY ƒê·ªîI 2 D√íNG D∆Ø·ªöI ƒê√ÇY
        const BOT_TOKEN = "8005421786:AAGqqcB4BBuRbNtvMr2KlafbyNq-1HLYwX0"; 
        const CHAT_ID = "6956722046"; 
        // =====================================================

        let finalAmount = "";
        let userName = "";

        function startRandom() {
            const nameInput = document.getElementById('user-name');
            userName = nameInput.value.trim();

            if (!userName) {
                alert("Vui l√≤ng nh·∫≠p t√™n tr∆∞·ªõc khi ch∆°i!");
                return;
            }

            // ·∫®n b∆∞·ªõc 1, hi·ªán loading
            document.getElementById('step-1').style.display = 'none';
            document.getElementById('loading').style.display = 'block';

            // Gi·∫£ l·∫≠p th·ªùi gian ch·ªù random (2 gi√¢y)
            setTimeout(() => {
                calculateResult();
            }, 2000);
        }

        function calculateResult() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('result-area').style.display = 'block';
            
            // Logic t·ª∑ l·ªá
            // 200k = 0.005% -> C·∫ßn s·ªë random t·ª´ 0 -> 100.
            // N·∫øu random <= 0.005 -> tr√∫ng 200k.
            
            const rand = Math.random() * 100; // 0.00000 -> 99.99999
            
            if (rand < 0.005) {
                finalAmount = "200.000";
            } else {
                // C√°c m·ªánh gi√° c√≤n l·∫°i: 10k, 20k, 50k, 100k
                // Chia ƒë·ªÅu cho 99.995% c√≤n l·∫°i
                const others = ["10.000", "20.000", "50.000", "100.000"];
                const randomIndex = Math.floor(Math.random() * others.length);
                finalAmount = others[randomIndex];
            }

            document.getElementById('display-name').innerText = userName;
            document.getElementById('lucky-money').innerText = finalAmount + " VNƒê";
            
            // Hi·ªán ph·∫ßn upload QR sau khi c√≥ k·∫øt qu·∫£
            setTimeout(() => {
                document.getElementById('qr-section').style.display = 'block';
            }, 500);
        }

        function previewFile() {
            const fileInput = document.getElementById('qr-file');
            const fileNameDisplay = document.getElementById('file-name');
            if(fileInput.files.length > 0) {
                fileNameDisplay.innerText = "ƒê√£ ch·ªçn: " + fileInput.files[0].name;
            }
        }

        async function sendToTelegram() {
            const fileInput = document.getElementById('qr-file');
            
            if (fileInput.files.length === 0) {
                alert("B·∫°n qu√™n ch∆∞a ch·ªçn ·∫£nh m√£ QR r·ªìi!");
                return;
            }

            const btnSend = document.getElementById('btn-send');
            btnSend.innerText = "ƒêang g·ª≠i...";
            btnSend.disabled = true;

            const file = fileInput.files[0];
            const caption = `üßß L√å X√å M·ªöI!\n\nüë§ T√™n: ${userName}\nüí∞ S·ªë ti·ªÅn: ${finalAmount} VNƒê\n‚è∞ Th·ªùi gian: ${new Date().toLocaleString('vi-VN')}`;

            const formData = new FormData();
            formData.append("chat_id", CHAT_ID);
            formData.append("caption", caption);
            formData.append("photo", file);

            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.ok) {
                    alert("G·ª≠i th√†nh c√¥ng! Ch·ªù nh·∫≠n ti·ªÅn nh√©.");
                    btnSend.innerText = "ƒê√£ g·ª≠i th√†nh c√¥ng";
                } else {
                    alert("L·ªói khi g·ª≠i Telegram: " + data.description);
                    btnSend.innerText = "Th·ª≠ l·∫°i";
                    btnSend.disabled = false;
                }
            } catch (error) {
                console.error(error);
                alert("C√≥ l·ªói x·∫£y ra khi k·∫øt n·ªëi Telegram.");
                btnSend.innerText = "Th·ª≠ l·∫°i";
                btnSend.disabled = false;
            }
        }
    </script>
</body>
</html>
